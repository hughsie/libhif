<!DOCTYPE node PUBLIC "-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">

<!--
Copyright Contributors to the libdnf project.

This file is part of libdnf: https://github.com/rpm-software-management/libdnf/

Libdnf is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 2.1 of the License, or
(at your option) any later version.

Libdnf is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with libdnf.  If not, see <https://www.gnu.org/licenses/>.
-->

<node>
<interface name="org.rpm.dnf.v0.rpm.Rpm">
    <annotation name="org.gtk.GDBus.DocString.Short"
        value="Interface to RPM packages" />
    <method name="list">
        <annotation name="org.gtk.GDBusDocstring"
            value="Get list of packages that match to given filters.

            Following options are supported:

            &lt;variablelist&gt;
              &lt;varlistentry&gt;
                &lt;term&gt;patterns: list of strings&lt;/term&gt;
                &lt;listitem&gt;&lt;para&gt;
                  any package matching to any of patterns is returned
                &lt;/para&gt;&lt;/listitem&gt;
              &lt;/varlistentry&gt;
              &lt;varlistentry&gt;
                &lt;term&gt;package_attrs: list of strings&lt;/term&gt;
                &lt;listitem&gt;&lt;para&gt;
                  list of package attributes that are returned
                &lt;/para&gt;&lt;/listitem&gt;
              &lt;/varlistentry&gt;
              &lt;varlistentry&gt;
                &lt;term&gt;with_nevra: bool (default true)&lt;/term&gt;
                &lt;listitem&gt;&lt;para&gt;
                  match patterns against available packages NEVRAs
                &lt;/para&gt;&lt;/listitem&gt;
              &lt;/varlistentry&gt;
              &lt;varlistentry&gt;
                &lt;term&gt;with_provides: bool (default true)&lt;/term&gt;
                &lt;listitem&gt;&lt;para&gt;
                  match patterns against available packages provides
                &lt;/para&gt;&lt;/listitem&gt;
              &lt;/varlistentry&gt;
              &lt;varlistentry&gt;
                &lt;term&gt;with_filenames: bool (default true)&lt;/term&gt;
                &lt;listitem&gt;&lt;para&gt;
                  match patterns against names of the files in available packages
                &lt;/para&gt;&lt;/listitem&gt;
              &lt;/varlistentry&gt;
              &lt;varlistentry&gt;
                &lt;term&gt;with_src: bool (default true)&lt;/term&gt;
                &lt;listitem&gt;&lt;para&gt;
                  include source rpms into the results
                &lt;/para&gt;&lt;/listitem&gt;
              &lt;/varlistentry&gt;
              &lt;varlistentry&gt;
                &lt;term&gt;icase: bool (default true)&lt;/term&gt;
                &lt;listitem&gt;&lt;para&gt;
                  ignore case while matching patterns
                &lt;/para&gt;&lt;/listitem&gt;
              &lt;/varlistentry&gt;
            &lt;/variablelist&gt;

            Unknown options are ignored."/>

        <arg name="options" type="a{sv}" direction="in">
            <annotation name="org.gtk.GDBusDocstring"
                value="an array of key/value pairs"/>
        </arg>
        <arg name="data" type="aa{sv}" direction="out">
            <annotation name="org.gtk.GDBusDocstring"
                value="array of returned packages with requested attributes"/>
        </arg>
    </method>

    <method name="install">
        <annotation name="org.gtk.GDBusDocstring"
            value=" Mark packages specified by @specs for installation.

            Following @options are supported:

            &lt;variablelist&gt;
              &lt;varlistentry&gt;
                &lt;term&gt;repo_ids: list of strings&lt;/term&gt;
                &lt;listitem&gt;&lt;para&gt;
                Identifiers of the repos from which the packages could be installed.
                &lt;/para&gt;&lt;/listitem&gt;
              &lt;/varlistentry&gt;
              &lt;varlistentry&gt;
                &lt;term&gt;strict: boolean, default true&lt;/term&gt;
                &lt;listitem&gt;&lt;para&gt;
                Indicates whether existing but non-installable packages should
                be skipped (false) or cause transaction resolving fail (true).
                &lt;/para&gt;&lt;/listitem&gt;
              &lt;/varlistentry&gt;
            &lt;/variablelist&gt;

            Unknown options are ignored."/>

        <arg name="specs" type="as" direction="in">
            <annotation name="org.gtk.GDBusDocstring"
                value="an array of package specifications to be installed on the system"/>
        </arg>
        <arg name="options" type="a{sv}" direction="in">
            <annotation name="org.gtk.GDBusDocstring"
                value="an array of key/value pairs to modify install behavior"/>
        </arg>
    </method>

    <method name="upgrade">
        <annotation name="org.gtk.GDBusDocstring"
            value="Mark packages specified by @specs for upgrade.

            Following @options are supported:

            &lt;variablelist&gt;
              &lt;varlistentry&gt;
                &lt;term&gt;repo_ids: list of strings&lt;/term&gt;
                &lt;listitem&gt;&lt;para&gt;
                Identifiers of the repos from which the packages could be upgraded.
                &lt;/para&gt;&lt;/listitem&gt;
              &lt;/varlistentry&gt;
            &lt;/variablelist&gt;

            Unknown options are ignored."/>

        <arg name="specs" type="as" direction="in">
            <annotation name="org.gtk.GDBusDocstring"
                value="an array of package specifications to be upgraded on the system"/>
        </arg>
        <arg name="options" type="a{sv}" direction="in">
            <annotation name="org.gtk.GDBusDocstring"
                value="an array of key/value pairs to modify upgrade behavior"/>
        </arg>
    </method>

    <method name="remove">
        <annotation name="org.gtk.GDBusDocstring"
            value=" Mark packages specified by @specs for removal.

            Unknown options are ignored."/>

        <arg name="specs" type="as" direction="in">
            <annotation name="org.gtk.GDBusDocstring"
                value="an array of package specifications to be removed on the system"/>
        </arg>
        <arg name="options" type="a{sv}" direction="in">
            <annotation name="org.gtk.GDBusDocstring"
                value="an array of key/value pairs to modify remove behavior"/>
        </arg>
    </method>

    <method name="downgrade">
        <annotation name="org.gtk.GDBusDocstring"
            value=" Mark packages specified by @specs for downgrade.

            Following @options are supported:

            Unknown options are ignored."/>
        <arg name="specs" type="as" direction="in">
            <annotation name="org.gtk.GDBusDocstring"
                value="an array of package specifications to be downgraded on the system"/>
        </arg>
        <arg name="options" type="a{sv}" direction="in">
            <annotation name="org.gtk.GDBusDocstring"
                value="an array of key/value pairs to modify downgrade behavior"/>
        </arg>
    </method>

    <method name="reinstall">
        <annotation name="org.gtk.GDBusDocstring"
            value="Mark packages specified by @specs for reinstall.

            Following @options are supported:

            Unknown options are ignored."/>
        <arg name="specs" type="as" direction="in">
            <annotation name="org.gtk.GDBusDocstring"
                value="an array of package specifications to be reinstalled on the system"/>
        </arg>
        <arg name="options" type="a{sv}" direction="in">
            <annotation name="org.gtk.GDBusDocstring"
                value="an array of key/value pairs to modify reinstall behavior"/>
        </arg>
    </method>

    <signal name="transaction_action_start">
        <annotation name="org.gtk.GDBusDocstring"
            value="Processing of the item has started."/>
        <arg name="nevra" type="s">
            <annotation name="org.gtk.GDBusDocstring"
                value="full NEVRA of the package"/>
        </arg>
        <arg name="action" type="u">
            <annotation name="org.gtk.GDBusDocstring"
                value="one of the dnfdaemon::RpmTransactionItem::Actions enum"/>
        </arg>
        <arg name="total" type="t">
            <annotation name="org.gtk.GDBusDocstring"
                value="total to process"/>
        </arg>
    </signal>

    <signal name="transaction_action_progress">
        <annotation name="org.gtk.GDBusDocstring"
            value="Progress in processing of the package."/>
        <arg name="nevra" type="s">
            <annotation name="org.gtk.GDBusDocstring"
                value="full NEVRA of the package"/>
        </arg>
        <arg name="amount" type="t">
            <annotation name="org.gtk.GDBusDocstring"
                value="amount already processed"/>
        </arg>
        <arg name="total" type="t">
            <annotation name="org.gtk.GDBusDocstring"
                value="total to process"/>
        </arg>
    </signal>

    <signal name="transaction_action_stop">
        <annotation name="org.gtk.GDBusDocstring"
            value="Processing of the item has finished."/>
        <arg name="nevra" type="s">
            <annotation name="org.gtk.GDBusDocstring"
                value="full NEVRA of the package"/>
        </arg>
        <arg name="total" type="t">
            <annotation name="org.gtk.GDBusDocstring"
                value="total processed"/>
        </arg>
    </signal>

    <signal name="transaction_script_start">
        <annotation name="org.gtk.GDBusDocstring"
            value="The scriptlet has started."/>
        <arg name="nevra" type="s">
            <annotation name="org.gtk.GDBusDocstring"
                value="full NEVRA of the package script belongs to"/>
        </arg>
    </signal>

    <signal name="transaction_script_stop">
        <annotation name="org.gtk.GDBusDocstring"
            value="The scriptlet has successfully finished."/>
        <arg name="nevra" type="s">
            <annotation name="org.gtk.GDBusDocstring"
                value="full NEVRA of the package script belongs to"/>
        </arg>
        <arg name="return_code" type="t">
            <annotation name="org.gtk.GDBusDocstring"
                value="return value of the script"/>
        </arg>
    </signal>

    <signal name="transaction_script_error">
        <annotation name="org.gtk.GDBusDocstring"
            value="The scriptlet has finished with an error."/>
        <arg name="nevra" type="s">
            <annotation name="org.gtk.GDBusDocstring"
                value="full NEVRA of the package script belongs to"/>
        </arg>
        <arg name="return_code" type="t">
            <annotation name="org.gtk.GDBusDocstring"
                value="return value of the script"/>
        </arg>
    </signal>

    <signal name="transaction_verify_start">
        <annotation name="org.gtk.GDBusDocstring"
            value="Package files verification has started."/>
        <arg name="total" type="t">
            <annotation name="org.gtk.GDBusDocstring"
                value="total to process"/>
        </arg>
    </signal>

    <!--
        transaction_verify_progress:
        @nevra: full NEVRA of the package
    -->
    <signal name="transaction_verify_progress">
        <annotation name="org.gtk.GDBusDocstring"
            value="Progress in processing of the package."/>
        <arg name="amount" type="t">
            <annotation name="org.gtk.GDBusDocstring"
                value="amount already processed"/>
        </arg>
        <arg name="total" type="t">
            <annotation name="org.gtk.GDBusDocstring"
                value="total to process"/>
        </arg>
    </signal>

    <!--
        transaction_verify_stop:
        @nevra: full NEVRA of the package
    -->
    <signal name="transaction_verify_stop">
        <annotation name="org.gtk.GDBusDocstring"
            value="Package files verification has finished."/>
        <arg name="total" type="t">
            <annotation name="org.gtk.GDBusDocstring"
                value=""/>
        </arg>
    </signal>

    <signal name="transaction_unpack_error">
        <annotation name="org.gtk.GDBusDocstring"
            value="Error while unpacking the package."/>
        <arg name="nevra" type="s">
            <annotation name="org.gtk.GDBusDocstring"
                value="full NEVRA of the package"/>
        </arg>
    </signal>
</interface>

</node>
